{% extends 'base.html' %}
{% block title %} Public Bills Calculation {% endblock %}
{% block sidebar %}
<aside class="vertical-menu">
    <a href="{% url 'incoming_bills' house.id %}">Incoming bills</a>
    <a href="{% url 'index' %}">Back to start</a>
    <a href="#">Profile</a>
    <a href="#">Settings</a>
    <a href="#">Logout</a>
</aside>
{% endblock %}
{% block content %}
<div class="container mt-4">
    <h2>Public Bills Calculation for {{ house.address }}</h2>
    {% if bill_period %}
        <h4>Period: {{ bill_period }}</h4>
    {% endif %}

    {% if apartment_bills %}
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Apartment</th>
                        <th>Service Positions</th>
                        <th>Total Amount</th>
                    </tr>
                </thead>
                <tbody>
                    {% for apartment, bills in apartment_bills.items %}
                        <tr>
                            <td>{{ apartment.apartment_nr }}</td>
                            <td>
                                {% for position in bills.positions %}
                                    <div>{{ position.service }}: {{ position.amount }} EUR</div>
                                {% endfor %}
                            </td>
                            <td>{{ bills.total }} EUR</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p>No public bills found for this house.</p>
    {% endif %}
    
    <a href="{% url 'services_by_house' house.id %}" class="btn btn-secondary">Back to Services</a>
</div>
{% endblock %} 